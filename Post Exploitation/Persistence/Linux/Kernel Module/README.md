# Kernel module persistence

## Things to remember
  *  This technique could easily crash/impair the target OS if conducted improperly
  *  This example spawns userspace programs from kernelspace

## How it works  
  *  Define a function that will execute a userspace program at an interval
  *  Define module functions for loading and unloading
  *  Spawn a [`kthread`](https://www.cs.fsu.edu/~cop4610t/lectures/project2/kthreads/kthreads.pdf) on module load pointing to evil function
  *  Configure module to load on boot for persistence across reboots

## Compilation  
  *  Download/install Linux kernel headers for target kernel version
  *  Modify `Makefile` to reflect target kernel version
  *  Execute `make` to compile the source to a `.ko` file
  *  Tranfer `.ko` file to target and [install](https://github.com/SpacemanHenry/hacknotes/tree/main/Post%20Exploitation/Persistence/Linux#kernel-module)
